<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
		integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
	<link rel="stylesheet" href="css/join.css" />
	<title>LiveShare App</title>
</head>

<body>
	<div class="join-container">
		<header class="join-header">
			<h1><i class="fas fa-smile"></i> LiveShare</h1>
		</header>
		<main class="join-main">
			<form id="form_join">
				<div class="form-control">
					<label for="username">Username</label>
					<input type="text" id="username" placeholder="Enter username" required />
				</div>
				<div class="form-control">
					<label for="room">Room</label>
					<input type="text" id="room" placeholder="Enter room name" required>
				</div>
				<button id="join_btn" class="btn">Join LiveShare</button>
			</form>
		</main>
	</div>
	<script>

		if (localStorage.length > 0) {
			location.assign("/chat.html");
		} else {

			// form  preventDefault 
			document.getElementById("form_join").addEventListener("submit", (event) => {
				event.preventDefault();
			})

			let join_btn = document.getElementById("join_btn");

			join_btn.addEventListener("click", () => {
				let username = document.getElementById("username").value;
				let room = document.getElementById("room").value;

				username = username.trim();
				room = room.trim();
				console.log(username);
				console.log(room);

				// set username and room in localstorage 
				if (username.length === 0 || room.length === 0) {
					alert("please fill the required field");
				} else {
					localStorage.setItem("username", username);
					localStorage.setItem("room", room);
					location.assign("/chat.html");
				}
			});

		}

	</script>
</body>

</html>